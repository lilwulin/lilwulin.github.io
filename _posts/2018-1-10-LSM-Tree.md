---
layout: post
title: Log-Structured Merge-Tree 日志结构合并树
---


B+树常常被用于各种RDBMS的索引。它的大致结构如下图：

![]({{ site.baseurl }}/posts/BpTree.png)

图中的Page可以看成是硬盘映射到内存的一个block。各个Page组成了一个具有良好查找性能的B+树，允许在大致`O(Log N)`的复杂度下找到对应的Key。但同时B+树又有一个特点，那就是各个Page虽然逻辑上相隔很近，但物理上可能相隔很远。这导致了B+树进行写操作时，Page的分裂或者合并，会造成大量的**随机**硬盘读写。如果我们的应用场景有大量的写需求，不断地对B+树中的键值对进行增删无疑会伤害到IO性能。以下这幅图来自ACM杂志2009年的一则报告：

![](http://deliveryimages.acm.org/10.1145/1570000/1563874/jacobs3.jpg)

可以看到，硬盘（无论是机械还是固态），顺序读写都会比随机读写要快2~3倍以上。

#TODO